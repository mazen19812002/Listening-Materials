<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Planning - Listening Test</title>
    <style>
        :root {
            --bg-color: #e0f2fe;
            --card-bg: #ffffff;
            --primary-blue: #1e3a8a;
            --correct-green: #16a34a;
            --wrong-red: #dc2626;
            --text-color: #000000;
            --base-font-size: 20px;
        }

        * {
            box-sizing: border-box;
            transition: transform 0.2s ease-in-out;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Segoe UI", Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header & Navigation */
        #header-container {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: margin-top 0.3s ease;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .tabs {
            display: flex;
            gap: 10px;
        }

        .tab-btn {
            background: transparent;
            border: 2px solid white;
            color: white;
            padding: 5px 15px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary-blue);
        }

        .controls-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .zoom-controls button {
            background: white;
            border: none;
            color: var(--primary-blue);
            width: 30px;
            height: 30px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
        }

        .toggle-btn {
            background: #f59e0b;
            color: black;
            border: none;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 4px;
        }

        /* Floating Audio Bar */
        #audio-bar {
            width: 100%;
            background: #f8fafc;
            padding: 10px 20px;
            border-bottom: 2px solid var(--primary-blue);
            display: flex;
            justify-content: center;
        }

        audio {
            width: 100%;
            max-width: 800px;
            height: 35px;
        }

        /* Main Content Area */
        #main-content {
            flex: 1;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            font-size: var(--base-font-size);
            line-height: 1.3;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        h1, h2 {
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 0;
            margin-bottom: 10px;
            text-align: center;
        }

        /* Question Cards */
        .question-card {
            background: var(--card-bg);
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }

        .question-card:hover {
            transform: scale(1.01);
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .option-btn {
            background: #f1f5f9;
            border: 1px solid #94a3b8;
            padding: 8px 12px;
            text-align: left;
            cursor: pointer;
            font-size: 0.9em;
            border-radius: 4px;
            width: 100%;
        }

        .option-btn:hover:not(:disabled) {
            background: #e2e8f0;
        }

        .option-btn:disabled {
            cursor: default;
        }

        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: #065f46 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: #991b1b !important;
        }

        /* Transcript Styling */
        .transcript-text {
            background: white;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-wrap;
            border: 1px solid #cbd5e1;
        }

        .speaker {
            font-weight: bold;
            color: var(--primary-blue);
        }

        /* Footer */
        footer {
            background: white;
            text-align: center;
            padding: 10px;
            font-size: 14px;
            border-top: 1px solid #cbd5e1;
            width: 100%;
            margin-top: 20px;
        }

        /* Hidden State Logic */
        .header-hidden {
            margin-top: -45px; /* Height of top-bar approx */
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div id="header-container">
        <div class="top-bar" id="top-navigation">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('test')">Listening Test</button>
                <button class="tab-btn" onclick="switchTab('transcript')">Transcript</button>
            </div>
            
            <div class="controls-right">
                <div class="zoom-controls">
                    <button onclick="changeZoom(-2)">-</button>
                    <button onclick="changeZoom(2)">+</button>
                </div>
                <button class="toggle-btn" id="toggle-header" onclick="toggleHeader()">HIDE CONTROLS</button>
            </div>
        </div>

        <div id="audio-bar">
            <audio controls>
                <source src="https://github.com/mazen19812002/Listening-Materials/raw/refs/heads/main/07.MP3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
    </div>

    <div id="main-content">
        <!-- TEST SECTION -->
        <section id="test-section" class="content-section active">
            <h1>Listening Comprehension Test</h1>
            <div id="quiz-container">
                <!-- Questions will be injected here -->
            </div>
        </section>

        <!-- TRANSCRIPT SECTION -->
        <section id="transcript-section" class="content-section">
            <h1>Audio Transcript</h1>
            <div class="transcript-text" id="transcript-content">
                <!-- Transcript injected here -->
            </div>
        </section>
    </div>

    <footer>
        All rights are reserved to Dr. Mazen Badawy – Doctorate of English Teaching & Testing
    </footer>

    <script>
        // --- DATA ---
        const transcriptData = `
<span class="speaker">Speaker 1:</span> In our recent project management workshop, we were asked to discuss the importance of making a detailed plan for engineering projects. I believe that planning is the foundation of any successful project.
<span class="speaker">Speaker 2:</span> I completely agree. Planning is a critical skill for engineers because it allows us to anticipate possible challenges, allocate resources effectively, and monitor progress toward specific objectives.
<span class="speaker">Speaker 1:</span> When starting a project plan, the first aspect to consider is the scope. We must clearly define what the project includes and what it does not include in order to avoid confusion later.
<span class="speaker">Speaker 2:</span> Exactly. Defining the scope helps prevent misunderstandings and ensures that all team members share the same expectations about the final outcome.
<span class="speaker">Speaker 1:</span> Another important factor is identifying available resources, such as team members, budget, time, equipment, and materials. Without proper resource planning, even a good idea can fail.
<span class="speaker">Speaker 2:</span> That’s true. Efficient resource management ensures that tasks are completed without unnecessary delays or waste.
<span class="speaker">Speaker 1:</span> We should also establish a clear timeline. Engineers need to know when each stage of the project should begin and end.
<span class="speaker">Speaker 2:</span> Yes, setting milestones helps track progress and ensures that the project stays on schedule.
<span class="speaker">Speaker 1:</span> Risk management is equally important. We should identify potential problems in advance and prepare strategies to minimize their impact.
<span class="speaker">Speaker 2:</span> Absolutely. Considering possible risks makes the project more flexible and resilient in case unexpected issues arise.
<span class="speaker">Speaker 1:</span> A strong plan must also include clear goals and measurable objectives so that success can be evaluated properly.
<span class="speaker">Speaker 2:</span> I agree. After setting goals, we should divide the project into smaller tasks to make it more manageable.
<span class="speaker">Speaker 1:</span> Deadlines are crucial as well. Assigning a deadline to each task keeps the team focused and accountable.
<span class="speaker">Speaker 2:</span> And assigning responsibilities ensures that every team member knows their role and duties clearly.
<span class="speaker">Speaker 1:</span> Finally, matching tasks with appropriate resources guarantees that each task has the support and tools required for completion.
<span class="speaker">Speaker 2:</span> Exactly. A well-structured plan improves efficiency, reduces risks, and increases the likelihood of achieving project success.`;

        const questions = [
            { q: "1. What was discussed in the workshop?", o: ["A. The importance of planning engineering projects", "B. Marketing strategies for companies", "C. Financial accounting systems", "D. Recruitment procedures"], a: 0 },
            { q: "2. Why is planning critical for engineers?", o: ["A. It eliminates teamwork", "B. It helps anticipate challenges", "C. It guarantees profit", "D. It reduces communication"], a: 1 },
            { q: "3. What is the first step in making a plan?", o: ["A. Assigning deadlines", "B. Managing risks", "C. Defining the project scope", "D. Buying materials"], a: 2 },
            { q: "4. Why is defining scope important?", o: ["A. It increases project cost", "B. It delays project progress", "C. It reduces team members", "D. It prevents misunderstandings"], a: 3 },
            { q: "5. What resources must be considered?", o: ["A. People, time, money, and materials", "B. Social media platforms", "C. Advertising campaigns", "D. Entertainment budgets"], a: 0 },
            { q: "6. Why is resource management necessary?", o: ["A. To avoid team cooperation", "B. To reduce documentation", "C. To prevent delays and waste", "D. To increase project risks"], a: 2 },
            { q: "7. What does a timeline provide?", o: ["A. Extra project funding", "B. Clear start and finish dates", "C. Reduced team size", "D. Fewer responsibilities"], a: 1 },
            { q: "8. What helps track project progress?", o: ["A. Informal discussions", "B. Increased meetings", "C. Milestones", "D. Financial rewards"], a: 2 },
            { q: "9. Why is risk management important?", o: ["A. It eliminates teamwork", "B. It increases uncertainty", "C. It prepares for potential problems", "D. It reduces accountability"], a: 2 },
            { q: "10. What makes a project resilient?", o: ["A. Ignoring challenges", "B. Identifying possible risks", "C. Shortening deadlines", "D. Reducing resources"], a: 1 },
            { q: "11. What must goals in a plan be?", o: ["A. Clear and measurable", "B. General and flexible", "C. Hidden from the team", "D. Financial only"], a: 0 },
            { q: "12. Why divide the project into tasks?", o: ["A. To increase confusion", "B. To make it manageable", "C. To delay completion", "D. To reduce responsibilities"], a: 1 },
            { q: "13. Why are deadlines crucial?", o: ["A. They reduce costs", "B. They increase pressure only", "C. They keep the team accountable", "D. They remove leadership roles"], a: 2 },
            { q: "14. What ensures clarity of roles?", o: ["A. Assigning responsibilities", "B. Avoiding communication", "C. Reducing staff numbers", "D. Ignoring documentation"], a: 0 },
            { q: "15. Why match tasks with resources?", o: ["A. To guarantee necessary support", "B. To reduce planning time", "C. To increase workload", "D. To eliminate teamwork"], a: 0 },
            { q: "16. What improves efficiency in projects?", o: ["A. Poor communication", "B. Lack of structure", "C. Well-made planning", "D. Ignoring deadlines"], a: 2 },
            { q: "17. What can happen without proper planning?", o: ["A. Better results", "B. Confusion and failure", "C. Faster completion", "D. Reduced workload"], a: 1 },
            { q: "18. What helps evaluate success?", o: ["A. Clear objectives", "B. Fewer meetings", "C. Increased risks", "D. Limited resources"], a: 0 },
            { q: "19. Why are milestones useful?", o: ["B. They track progress stages", "A. They replace deadlines", "C. They increase cost", "D. They reduce team effort"], a: 0 }, // Swapped to balance distribution internally
            { q: "20. What should engineers anticipate?", o: ["A. Only success", "B. Financial profit", "C. Project challenges", "D. Public praise"], a: 2 },
            { q: "21. What ensures everyone understands expectations?", o: ["A. A clearly defined scope", "B. Fewer team members", "C. Short deadlines", "D. Minimal resources"], a: 0 },
            { q: "22. What reduces the chances of problems?", o: ["A. Ignoring potential risks", "B. Careful planning", "C. Avoiding teamwork", "D. Increasing project size"], a: 1 },
            { q: "23. What is essential for accountability?", o: ["A. Flexible goals", "B. Informal leadership", "C. Clear deadlines", "D. Reduced tasks"], a: 2 },
            { q: "24. What happens when roles are unclear?", o: ["A. Efficiency increases", "B. Costs decrease", "C. Deadlines shorten", "D. Confusion arises"], a: 3 },
            { q: "25. What does resource allocation ensure?", o: ["A. Delayed tasks", "B. Adequate tools for tasks", "C. Reduced team size", "D. Financial loss"], a: 1 },
            { q: "26. Why is planning described as foundational?", o: ["A. It guarantees promotion", "B. It eliminates risk", "C. It supports project success", "D. It increases workload"], a: 2 },
            { q: "27. What improves accountability in a team?", o: ["A. Ignoring responsibilities", "B. Removing deadlines", "C. Clear task assignments", "D. Informal planning"], a: 2 },
            { q: "28. What makes a plan practical?", o: ["A. Lack of structure", "B. Clear steps and structure", "C. Minimal goals", "D. Reduced teamwork"], a: 1 },
            { q: "29. What is required for successful project completion?", o: ["A. Random decision-making", "B. Limited planning", "C. Undefined objectives", "D. Organized planning process"], a: 3 },
            { q: "30. What is the overall message of the discussion?", o: ["A. Planning is unnecessary", "B. Planning complicates projects", "C. Planning is essential for success", "D. Planning reduces creativity"], a: 2 }
        ];

        // --- STATE ---
        let currentFontSize = 20;
        let isHeaderHidden = false;

        // --- INITIALIZATION ---
        window.onload = () => {
            renderQuiz();
            document.getElementById('transcript-content').innerHTML = transcriptData;
        };

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            questions.forEach((qObj, qIndex) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${qIndex}`;

                const qText = document.createElement('span');
                qText.className = 'question-text';
                qText.innerText = qObj.q;
                card.appendChild(qText);

                const grid = document.createElement('div');
                grid.className = 'options-grid';

                qObj.o.forEach((opt, oIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => handleAnswer(qIndex, oIndex, qObj.a);
                    grid.appendChild(btn);
                });

                card.appendChild(grid);
                container.appendChild(card);
            });
        }

        // --- CORE LOGIC ---
        function handleAnswer(qIndex, selectedIndex, correctIndex) {
            const card = document.getElementById(`q-card-${qIndex}`);
            const buttons = card.querySelectorAll('.option-btn');
            
            buttons.forEach((btn, idx) => {
                btn.disabled = true; // Single attempt logic
                if (idx === correctIndex) {
                    btn.classList.add('correct');
                } else if (idx === selectedIndex) {
                    btn.classList.add('wrong');
                }
            });
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));

            if (tab === 'test') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('test-section').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('transcript-section').classList.add('active');
            }
        }

        function changeZoom(delta) {
            currentFontSize = Math.max(14, Math.min(36, currentFontSize + delta));
            document.getElementById('main-content').style.fontSize = currentFontSize + 'px';
        }

        function toggleHeader() {
            const container = document.getElementById('header-container');
            const btn = document.getElementById('toggle-header');
            isHeaderHidden = !isHeaderHidden;
            
            if (isHeaderHidden) {
                container.classList.add('header-hidden');
                btn.innerText = 'SHOW CONTROLS';
            } else {
                container.classList.remove('header-hidden');
                btn.innerText = 'HIDE CONTROLS';
            }
        }
    </script>
</body>

</html>
